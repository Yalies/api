{% extends 'base.html' %}

{% block head %}
<link rel="stylesheet" href="/static/css/article.css">
{% endblock %}

{% block content %}
<article>
    <h3>Face Book</h3>
    <p>Open the <a href="https://students.yale.edu/facebook" target="_blank">Yale Face Book</a>. Open your browser's developer tools (F12, Command+Option+I, or Right Click + Inspect Element), and navigate to the Network tab. Then, log in, and choose a network request that occurred after the login and copy the value of the <code>Cookie</code> property. Making sure not to accidentally include the 'Cookie: ' label.</p>
    <img src="/static/images/scraper/face_book.png" alt="Copying Face Book cookie">
    <textarea name="face_book_cookie" cols=30 rows=5 placeholder="Face Book cookie"></textarea>
    <h3>Directory</h3>
    <p>Open the <a href="https://directory.yale.edu" target="_blank">Yale Directory</a>, and open your developer tools again. <strong>Log in</strong> (you may still need to click the blue LOG IN button to access the privileged version of the website).</p>
    <img src="/static/images/scraper/directory_login.png" alt="Logging in to the directory">
    <p>Then, perform a search (it doesn't matter what for).</p>
    <img src="/static/images/scraper/directory_search.png" alt="Searching in the directory">
    <p>In the developer tools, select the query to the <code>api</code> endpoint. You'll notice the <code>Cookie</code> is too long to be displayed without elipses, so right click and copy it, then extract only the <code>_people_search_session</code> value. Make sure to remove the <code>_people_search_session=</code> label, and any cookies afterward, which would be separated by  a semicolon. (You can also copy the value under the "Cookies" tab of the developer tools.)</p>
    <img src="/static/images/scraper/directory_pss.png" alt="Copying Yale Directory _people_search_session cookie">
    <textarea name="people_search_session_cookie" cols=30 rows=8 placeholder="Directory people_search_session cookie"></textarea>
    <p>Finally, grab the <code>X-CSRF-Token</code> header value.</p>
    <img src="/static/images/scraper/directory_csrf_token.png" alt="Copying Yale Directory X-CSRF-Token header">
    <textarea name="csrf_token" cols=30 rows=3 placeholder="Directory CSRF Token"></textarea>
    <p>Next, log into YaleConnect at <a href="https://yaleconnect.yale.edu">yaleconnect.yale.edu</a>.</p>
    <img src="/static/images/scraper/yaleconnect_cookie.png" alt="Copying YaleConnect cookie property">
    <p>Return to the network tab and choose any request made after login, then select the Cookie property's value (again excluding the 'Cookie: ' label). Paste it below.</p>
    <textarea name="yaleconnect_cookie" cols=30 rows=8 placeholder="YaleConnect cookie"></textarea>
    <h3>Use caches:</h3>
    <label><input type="checkbox" class="cache" name=""> <strong>Full</strong></label>
    <label><input type="checkbox" class="cache" name="FaceBook"> Face Book</label>
    <label><input type="checkbox" class="cache" name="Directory"> Directory</label>
    <label><input type="checkbox" class="cache" name="NameCoach"> Name Coach</label>
    <label><input type="checkbox" class="cache" name="Departmental"> Departmental</label>
    <label><input type="checkbox" class="cache" name="YaleConnect"> YaleConnect</label>
    <button id="submit">Run Scraper</button>
</article>
<script src="/static/js/scraper.js"></script>
{% endblock %}
